(()=>{var e={};e.id=5193,e.ids=[5193],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5337:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(5890),s(226),s(4872);var a=s(1218),r=s(8345),n=s(4380),i=s.n(n),o=s(306),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5890)),"C:\\PROJECTS\\OCTOBER\\ERP\\apps\\frontend\\src\\app\\notifications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,226)),"C:\\PROJECTS\\OCTOBER\\ERP\\apps\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,4872,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\PROJECTS\\OCTOBER\\ERP\\apps\\frontend\\src\\app\\notifications\\page.tsx"],p="/notifications/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8136:(e,t,s)=>{Promise.resolve().then(s.bind(s,5804))},5804:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(4470),r=s(9140),n=s(4428),i=s(3209),o=s(1664),l=s(3522);function c(){let[e,t]=(0,o.useState)([]),[s,c]=(0,o.useState)(0),[d,p]=(0,o.useState)(!0),[x,u]=(0,o.useState)(null),[m,f]=(0,o.useState)([]);async function h(){p(!0),u(null);try{let e=await (0,l.hi)("/notifications");t(e.items||[]),c(e.unreadCount||0),f([])}catch(e){u(e?.message||"Failed to load")}finally{p(!1)}}let g=(0,o.useMemo)(()=>{let t={},s=new Date;s.setHours(0,0,0,0);let a=new Date(s);for(let r of(a.setDate(s.getDate()-1),e)){let e=r.createdAt?new Date(r.createdAt):new Date,n=e<a?e.toLocaleDateString():e>=s?"Today":"Yesterday";t[n]=t[n]||[],t[n].push(r)}let r=e=>"Today"===e?0:"Yesterday"===e?1:2;return Object.keys(t).sort((e,t)=>r(e)-r(t)).map(e=>({label:e,list:t[e]}))},[e]);async function y(){await (0,l.hi)("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({})}),await h()}return(0,a.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[a.jsx(r.default,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 border-b border-gray-100",children:a.jsx(n.Z,{title:"Notifications",subtitle:"Read and delete notifications."})}),(0,a.jsxs)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:[(0,a.jsxs)(i.Z,{className:"p-6 lg:p-7 flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-gray-900",children:["Notifications (",s," unread)"]}),a.jsx("button",{onClick:y,className:"inline-flex items-center justify-center h-10 px-5 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm",children:"Mark All As Read"})]}),a.jsx(i.Z,{className:"p-0",children:a.jsx("div",{className:"p-5 pt-3 overflow-y-auto",children:d?a.jsx("div",{className:"text-sm text-gray-500 px-1 py-10",children:"Loading…"}):x?a.jsx("div",{className:"text-sm text-rose-600 px-1 py-10",children:x}):0===e.length?a.jsx("div",{className:"text-sm text-gray-500 px-1 py-10",children:"No notifications"}):a.jsx("div",{className:"space-y-6",children:g.map(({label:e,list:t})=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 px-1",children:[a.jsx("div",{className:"font-medium text-gray-500",children:e}),(0,a.jsxs)("label",{className:"inline-flex items-center gap-2 cursor-pointer select-none",children:[a.jsx("input",{type:"checkbox",onChange:t=>(function(e,t){let s=g.find(t=>t.label===e)?.list.map(e=>e.id)||[];f(e=>{let a=new Set(e);for(let e of s)t?a.add(e):a.delete(e);return Array.from(a)})})(e,t.target.checked)}),a.jsx("span",{children:"Select all"})]})]}),a.jsx("div",{className:"space-y-3",children:t.map(e=>{var t;return(0,a.jsxs)("div",{className:(e.read?"bg-white":"bg-blue-50/40")+" rounded-xl border border-gray-100 px-4 py-3 flex items-center gap-3",children:[a.jsx("img",{src:e.actorPhotoUrl?e.actorPhotoUrl.startsWith("http")?e.actorPhotoUrl:`${l.Y_}${e.actorPhotoUrl}`:"https://via.placeholder.com/40",alt:"avatar",className:"h-9 w-9 rounded-full object-cover"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-900 text-sm truncate",children:e.message}),a.jsx("div",{className:"text-xs text-gray-500",children:function(e){if(!e)return"";let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/1e3);if(s<60)return`${s}min ago`.replace(/^0/,"1");let a=Math.floor(s/60);if(a<60)return`${a}min ago`;let r=Math.floor(a/60);if(r<24)return`${r}hr ago`;let n=Math.floor(r/24);return`${n} day${n>1?"s":""} ago`}(e.createdAt)})]}),!e.read&&a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-blue-500"}),a.jsx("input",{type:"checkbox",checked:(t=e.id,m.includes(t)),onChange:t=>f(s=>t.target.checked?[...s,e.id]:s.filter(t=>t!==e.id))}),a.jsx("button",{className:"ml-2 text-gray-500 hover:text-gray-700",title:"More",children:"⋯"})]},e.id)})})]},e))})})})]})]})]})}},4428:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a.default});var a=s(9710)},5890:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=s(4259);let r=(0,a.createProxy)(String.raw`C:\PROJECTS\OCTOBER\ERP\apps\frontend\src\app\notifications\page.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let o=(0,a.createProxy)(String.raw`C:\PROJECTS\OCTOBER\ERP\apps\frontend\src\app\notifications\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4966,3203,1410],()=>s(5337));module.exports=a})();