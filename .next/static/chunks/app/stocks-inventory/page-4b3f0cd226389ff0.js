(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8277],{6416:function(e,t,s){Promise.resolve().then(s.bind(s,1083))},1083:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(1514),l=s(2610),r=s(10),c=s(542),n=s(9170),i=s(7993),o=s(8861);function d(){let[e,t]=(0,i.useState)(null),[s,d]=(0,i.useState)([]),[m,u]=(0,i.useState)(!0),[h,y]=(0,i.useState)(null),[b,j]=(0,i.useState)("inventory");return(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,o.hi)("/stocks/kpis");t(e)}catch(e){}})()},[]),(0,i.useEffect)(()=>{let e=!0;return u(!0),y(null),(async()=>{try{let t=await (0,o.hi)("/stocks?view=".concat(encodeURIComponent(b)));if(!e)return;d(t.items||[])}catch(t){if(!e)return;y((null==t?void 0:t.message)||"Failed to load")}finally{e&&u(!1)}})(),()=>{e=!1}},[b]),(0,a.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 border-b border-gray-100",children:[(0,a.jsx)(r.Z,{title:"Stocks and Inventory",subtitle:"Update stocks and inventory table"}),(0,a.jsxs)("div",{className:"mt-2 text-sm flex gap-6",children:[(0,a.jsx)("button",{onClick:()=>j("stocks"),className:"pb-2 -mb-[1px] border-b-2 ".concat("stocks"===b?"text-blue-600 border-blue-600":"text-gray-400 border-transparent"),children:"Stocks"}),(0,a.jsx)("button",{onClick:()=>j("inventory"),className:"pb-2 -mb-[1px] border-b-2 ".concat("inventory"===b?"text-blue-600 border-blue-600":"text-gray-400 border-transparent"),children:"Inventory"})]})]}),(0,a.jsxs)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[(0,a.jsx)(p,{color:"blue",value:e?e.categories:"—",label:"Categories",sub:"2 more than last year"}),(0,a.jsx)(p,{color:"amber",value:e?e.totalItems:"—",label:"Total items",sub:"10 more than last year"}),(0,a.jsx)(p,{color:"purple",value:e?x(e.totalCost):"—",label:"Total item cost",sub:"2.5% less than last year"}),"inventory"===b?(0,a.jsx)(p,{color:"yellow",value:e?e.totalSuppliers:"—",label:"Total suppliers",sub:"2 more than last week"}):(0,a.jsx)(p,{color:"yellow",value:e?e.lowStock:"—",label:"Items low in stock",sub:"2 less than last week"})]}),(0,a.jsxs)(c.Z,{className:"p-6 lg:p-7 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"inventory"===b?"Update Inventory Table":"Update Stock List"}),(0,a.jsx)(n.default,{href:"/stocks-inventory/update",className:"inline-flex items-center justify-center h-10 px-5 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm",children:"inventory"===b?"Update Inventory":"Update Stock"})]}),(0,a.jsxs)(c.Z,{className:"p-0",children:[(0,a.jsx)("div",{className:"px-6 pt-5",children:(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"inventory"===b?"Inventory List":"Stock List"})}),(0,a.jsx)("div",{className:"mt-4 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-sm",children:[(0,a.jsx)("thead",{className:"text-left text-gray-500 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3",children:"S/N"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Image"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Product Name"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Product ID"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"QTY Purchased"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Total Amount"}),"stocks"===b&&(0,a.jsx)("th",{className:"px-6 py-3",children:"In-Stock"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Supplier"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Status"})]})}),(0,a.jsx)("tbody",{children:m?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-10 text-gray-500",colSpan:"stocks"===b?11:10,children:"Loading…"})}):h?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-10 text-rose-600",colSpan:"stocks"===b?11:10,children:h})}):0===s.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"px-6 py-10 text-gray-500",colSpan:"stocks"===b?11:10,children:"No items"})}):s.map((e,t)=>{var s,l;return(0,a.jsxs)("tr",{className:"border-b last:border-b-0",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-gray-500",children:String(t+1).padStart(2,"0")}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.imageUrl?(0,a.jsx)("img",{src:(e.imageUrl||"").startsWith("http")?e.imageUrl:"".concat(o.Y_).concat(e.imageUrl),alt:e.name,className:"h-10 w-10 object-cover rounded"}):(0,a.jsx)("div",{className:"h-10 w-10 rounded bg-gray-100"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-700",children:e.productId||"—"}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-700",children:e.category||"—"}),(0,a.jsxs)("td",{className:"px-6 py-4 text-gray-700",children:[null!==(s=e.qtyPurchased)&&void 0!==s?s:0,"number"==typeof e.qtyPurchased?"pcs":""]}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-700",children:x(e.unitPrice||0)}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-700",children:x(e.totalAmount||0)}),"stocks"===b&&(0,a.jsx)("td",{className:"px-6 py-4 text-gray-700",children:null!==(l=e.inStock)&&void 0!==l?l:0}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-700",children:e.supplier||"—"}),(0,a.jsx)("td",{className:"px-6 py-4",children:"inventory"===b?function(e){var t,s;let l=Number(null!==(t=e.qtyPurchased)&&void 0!==t?t:0),r=Number(null!==(s=e.functioning)&&void 0!==s?s:l);return r>=l&&l>0?(0,a.jsx)("span",{className:"text-emerald-600",children:"All functioning"}):r<=0?(0,a.jsx)("span",{className:"text-rose-600",children:"Not functioning"}):(0,a.jsxs)("span",{className:"text-amber-600",children:[r," functioning"]})}(e):function(e){let t=e||"In stock";return(0,a.jsx)("span",{className:"Out of Stock"===t?"text-rose-600":"Low in Stock"===t?"text-amber-600":"text-emerald-600",children:t})}(e.status)})]},e.id)})})]})})]}),(0,a.jsx)("footer",{className:"text-center text-xs text-gray-400 pt-2 pb-6",children:"Copyright \xa9 2025 Relia Energy. All Rights Reserved"})]})]})]})}function x(e){return e.toLocaleString("en-NG",{style:"currency",currency:"NGN",maximumFractionDigits:0})}function p(e){let{color:t,value:s,label:l,sub:r}=e,n={blue:"text-blue-600 bg-blue-50",amber:"text-amber-600 bg-amber-50",purple:"text-purple-600 bg-purple-50",yellow:"text-yellow-600 bg-yellow-50"};return(0,a.jsxs)(c.Z,{className:"p-5 flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-xl grid place-items-center ".concat(n[t]),children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-6 w-6 ".concat(n[t].split(" ")[0]),fill:"currentColor",children:(0,a.jsx)("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:s}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:l}),(0,a.jsx)("div",{className:"text-xs text-emerald-600 mt-1",children:r})]})]})}},10:function(e,t,s){"use strict";s.d(t,{Z:function(){return a.default}});var a=s(6615)}},function(e){e.O(0,[9044,1906,3881,3869,8753,1744],function(){return e(e.s=6416)}),_N_E=e.O()}]);