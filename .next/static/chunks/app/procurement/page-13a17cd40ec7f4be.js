(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7405],{6445:function(e,t,s){Promise.resolve().then(s.bind(s,2994))},2994:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(1514),l=s(2610),a=s(10),n=s(542),i=s(9170),c=s(7993),d=s(8861);function x(){let[e,t]=(0,c.useState)({total:0,totalAmount:0,pending:0,approved:0}),[s,x]=(0,c.useState)([]),[o,m]=(0,c.useState)(!0),[h,u]=(0,c.useState)(1),[p,g]=(0,c.useState)(0),[j,f]=(0,c.useState)(""),[N,v]=(0,c.useState)("All");async function b(){try{let e=await (0,d.hi)("/procurement/kpis");t(e)}catch(e){}}async function y(){m(!0);try{let e=new URLSearchParams({page:String(h),limit:String(10)});j.trim()&&e.set("q",j.trim()),"All"!==N&&e.set("status",N);let t=await (0,d.hi)("/procurement?".concat(e));x(t.items||[]),g(t.total||0)}catch(e){x([]),g(0)}finally{m(!1)}}(0,c.useEffect)(()=>{b()},[]),(0,c.useEffect)(()=>{y()},[h,j,N]);let w=e=>Number.isFinite(e)?e.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",S=e=>{if(!e)return"—";try{return new Date(e).toLocaleDateString("en-GB")}catch(e){return"—"}},k=e=>"Approved"===e?"text-green-600 bg-green-50":"Pending"===e?"text-orange-600 bg-orange-50":"Rejected"===e?"text-red-600 bg-red-50":"text-gray-600 bg-gray-50";return(0,r.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 border-b border-gray-100",children:(0,r.jsx)(a.Z,{title:"Procurement",subtitle:"Request for, view and track all requested procurements."})}),(0,r.jsxs)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(n.Z,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-xl bg-blue-50 grid place-items-center",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6 text-blue-600",children:(0,r.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2S15.9 22 17 22s2-.9 2-2-.9-2-2-2zM7.16 14h9.68l1.74-8H6L5.27 2H2v2h2l3.6 7.59L5.25 17h13.5v-2H7.16z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.total}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total request made"})]})]})}),(0,r.jsx)(n.Z,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-xl bg-purple-50 grid place-items-center",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6 text-purple-600",children:(0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["₦",w(e.totalAmount)]}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Total cost incurred"})]})]})}),(0,r.jsx)(n.Z,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-xl bg-orange-50 grid place-items-center",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6 text-orange-600",children:(0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.pending}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Pending request"})]})]})}),(0,r.jsx)(n.Z,{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-xl bg-green-50 grid place-items-center",children:(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"h-6 w-6 text-green-600",children:(0,r.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.approved}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Approved request"})]})]})})]}),(0,r.jsxs)(n.Z,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Procurement Request"}),(0,r.jsx)(i.default,{href:"/procurement/create",className:"inline-flex items-center justify-center h-10 px-5 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm text-sm",children:"Make Procurement Request"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-5",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search...",value:j,onChange:e=>{f(e.target.value),u(1)},className:"h-10 px-4 rounded-xl border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-blue-600"}),(0,r.jsxs)("select",{value:N,onChange:e=>{v(e.target.value),u(1)},className:"h-10 px-4 rounded-xl border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,r.jsx)("option",{value:"All",children:"All Status"}),(0,r.jsx)("option",{value:"Pending",children:"Pending"}),(0,r.jsx)("option",{value:"Approved",children:"Approved"}),(0,r.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,r.jsx)("option",{value:"Draft",children:"Draft"})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500 border-y bg-gray-50",children:[(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"S/N"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Item"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Qty"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Amount"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Requested By"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Sent to"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Date"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Status"}),(0,r.jsx)("th",{className:"px-5 py-3 font-medium",children:"Action"})]})}),(0,r.jsx)("tbody",{children:o?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:9,className:"px-5 py-8 text-center text-gray-500",children:"Loading..."})}):0===s.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:9,className:"px-5 py-8 text-center text-gray-500",children:"No procurement requests found"})}):s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b last:border-0 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-5 py-4",children:String(t+1+(h-1)*10).padStart(2,"0")}),(0,r.jsx)("td",{className:"px-5 py-4 text-gray-900",children:e.itemName}),(0,r.jsx)("td",{className:"px-5 py-4",children:e.quantity}),(0,r.jsxs)("td",{className:"px-5 py-4",children:["₦",w(e.totalPrice||0)]}),(0,r.jsx)("td",{className:"px-5 py-4",children:e.requestedBy||"—"}),(0,r.jsx)("td",{className:"px-5 py-4",children:e.sentTo||"—"}),(0,r.jsx)("td",{className:"px-5 py-4",children:S(e.date)}),(0,r.jsx)("td",{className:"px-5 py-4",children:(0,r.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-medium ".concat(k(e.status)),children:e.status})}),(0,r.jsx)("td",{className:"px-5 py-4",children:(0,r.jsx)(i.default,{href:"/procurement/".concat(e.id),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View more"})})]},e.id))})]})}),p>10&&(0,r.jsxs)("div",{className:"flex items-center justify-between mt-5 pt-5 border-t",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",(h-1)*10+1," to ",Math.min(10*h,p)," of ",p," results"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===h,className:"h-9 px-4 rounded-lg border border-gray-200 text-sm disabled:opacity-50 hover:bg-gray-50",children:"Previous"}),(0,r.jsx)("button",{onClick:()=>u(e=>e+1),disabled:10*h>=p,className:"h-9 px-4 rounded-lg border border-gray-200 text-sm disabled:opacity-50 hover:bg-gray-50",children:"Next"})]})]})]})]})]})]})}},10:function(e,t,s){"use strict";s.d(t,{Z:function(){return r.default}});var r=s(6615)}},function(e){e.O(0,[9044,1906,3881,3869,8753,1744],function(){return e(e.s=6445)}),_N_E=e.O()}]);