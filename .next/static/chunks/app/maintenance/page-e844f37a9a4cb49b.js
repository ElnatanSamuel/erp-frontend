(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5368],{432:function(e,t,a){Promise.resolve().then(a.bind(a,27))},27:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(1514),s=a(2610),l=a(10),r=a(542),i=a(9170),c=a(7993),d=a(8861);function o(){let e=new Date,[t,a]=(0,c.useState)(e.getMonth()),[o,m]=(0,c.useState)(e.getFullYear()),[g,x]=(0,c.useState)(()=>new Date(e.getFullYear(),e.getMonth(),e.getDate()).toISOString()),[f,p]=(0,c.useState)(null),[b,v]=(0,c.useState)([]),[j,w]=(0,c.useState)(!0),[N,y]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{try{let e=await (0,d.hi)("/maintenance/kpis");p(e)}catch(e){}})()},[]),(0,c.useEffect)(()=>{let e=!0;return w(!0),y(null),(async()=>{try{let a=await (0,d.hi)("/maintenance?month=".concat(t,"&year=").concat(o));if(!e)return;v(a.items||[])}catch(t){if(!e)return;y((null==t?void 0:t.message)||"Failed to load")}finally{e&&w(!1)}})(),()=>{e=!1}},[t,o]);let D=(0,c.useMemo)(()=>(function(e,t){let a=new Date(e,t,1).getDay(),n=new Date(e,t+1,0).getDate(),s=new Date(e,t,0).getDate(),l=[];for(let n=a-1;n>=0;n--)l.push({date:new Date(e,t-1,s-n),inMonth:!1});for(let a=1;a<=n;a++)l.push({date:new Date(e,t,a),inMonth:!0});for(;l.length%7!=0;)l.push({date:new Date(e,t+1,l.length%7),inMonth:!1});return l})(o,t),[o,t]),F=(0,c.useMemo)(()=>(function(e){let t={};for(let a of e){let e=u(new Date(a.date));(t[e]=t[e]||[]).push(a)}return t})(b),[b]);(0,c.useMemo)(()=>(function(e){let t={},a={overdue:3,pending:2,completed:1,scheduled:0};for(let n of e){let e=u(new Date(n.date)),s=(n.status||"").toLowerCase(),l="scheduled";s.includes("overdue")?l="overdue":s.includes("pending")?l="pending":s.includes("completed")&&(l="completed");let r=t[e];(void 0===r||a[l]>a[r])&&(t[e]=l)}return t})(b),[b]);let M=F[u(new Date(g))]||[],S=new Date,E=S.getFullYear()===o&&S.getMonth()===t?u(S):"",k=new Date(o,t,1).toLocaleDateString(void 0,{month:"long",year:"numeric"});return(0,n.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[(0,n.jsx)(s.default,{}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,n.jsx)("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 border-b border-gray-100",children:(0,n.jsx)(l.Z,{title:"Maintenance",subtitle:"View and create schedule for maintenance."})}),(0,n.jsxs)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[(0,n.jsx)(h,{color:"blue",value:f?f.scheduled:"—",label:"Scheduled maintenance",sub:"2 more than last quarter",iconPath:"M3 3h18v6H3zM3 11h18v10H3z"}),(0,n.jsx)(h,{color:"green",value:f?f.completed:"—",label:"Completed maintenance",sub:"2 more than last quarter",iconPath:"M9 16.2l-3.5-3.5-1.4 1.4L9 19 20 8l-1.4-1.4z"}),(0,n.jsx)(h,{color:"amber",value:f?f.pending:"—",label:"Pending maintenance",sub:"2 more than last quarter",iconPath:"M12 2a10 10 0 100 20 10 10 0 000-20z"}),(0,n.jsx)(h,{color:"rose",value:f?f.overdue:"—",label:"Overdue maintenance",sub:"2 more than last quarter",iconPath:"M12 2L3 7v10l9 5 9-5V7z"})]}),(0,n.jsxs)(r.Z,{className:"p-6 lg:p-7 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"Schedule a Maintenance"}),(0,n.jsx)(i.default,{href:"/maintenance/create",className:"inline-flex items-center justify-center h-10 px-5 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm",children:"Schedule Maintenance"})]}),(0,n.jsx)(r.Z,{className:"p-6 lg:p-7",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsx)("button",{onClick:()=>(function(e){let{month:t,year:a,setMonth:n,setYear:s}=e;0===t?(n(11),s(a-1)):n(t-1)})({month:t,year:o,setMonth:a,setYear:m}),className:"h-9 w-9 grid place-items-center rounded-lg hover:bg-gray-100",children:"‹"}),(0,n.jsx)("div",{className:"text-gray-900 font-medium",children:k}),(0,n.jsx)("button",{onClick:()=>(function(e){let{month:t,year:a,setMonth:n,setYear:s}=e;11===t?(n(0),s(a+1)):n(t+1)})({month:t,year:o,setMonth:a,setYear:m}),className:"h-9 w-9 grid place-items-center rounded-lg hover:bg-gray-100",children:"›"})]}),(0,n.jsxs)("div",{className:"rounded-2xl border border-gray-100 p-4 bg-[#EEF5FF] shadow-sm",children:[(0,n.jsx)("div",{className:"grid grid-cols-7 text-center text-xs text-gray-500 mb-2",children:["S","M","T","W","T","F","S"].map(e=>(0,n.jsx)("div",{className:"py-1",children:e},e))}),(0,n.jsx)("div",{className:"grid grid-cols-7 gap-1.5",children:D.map((e,t)=>{var a;let s=u(e.date),l=e.inMonth,r=((null===(a=F[s])||void 0===a?void 0:a.length)||0)>0;return(0,n.jsx)("button",{onClick:()=>x(e.date.toISOString()),className:"relative h-10 w-10 mx-auto grid place-items-center rounded-full text-sm transition "+(s===E&&l?"text-white shadow-sm bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9]":r?"text-blue-700 bg-transparent border border-[#3B82F6]":l?"text-gray-700 hover:bg-white/60":"text-gray-300"),children:(0,n.jsx)("span",{children:e.date.getDate()})},t)})})]})]}),(0,n.jsxs)("div",{className:"border-l border-gray-100 pl-6",children:[(0,n.jsx)("div",{className:"text-sm text-gray-500",children:function(e){let t=String(e.getDate()).padStart(2,"0"),a=e.toLocaleDateString(void 0,{month:"long"}),n=e.getFullYear();return"".concat(t," ").concat(a,", ").concat(n)}(new Date(g))}),(0,n.jsx)("div",{className:"mt-3 space-y-5",children:j?(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"Loading…"}):0===M.length?(0,n.jsx)("div",{className:"text-sm text-gray-500",children:"No schedules for selected date"}):M.map((e,t)=>(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,n.jsxs)("span",{className:"font-semibold mr-1",children:[t+1,"."]})," ",e.title]}),(0,n.jsx)(i.default,{href:"/maintenance/".concat(e.id),className:"inline-flex items-center justify-center h-9 px-4 rounded-lg text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm w-fit",children:"View"})]},e.id))})]})]})}),(0,n.jsx)("footer",{className:"text-center text-xs text-gray-400 pt-2 pb-6",children:"Copyright \xa9 2025 Relia Energy. All Rights Reserved"})]})]})]})}function u(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate())}function h(e){let{color:t,value:a,label:s,sub:l,iconPath:i}=e,c={blue:"text-blue-600 bg-blue-50",green:"text-emerald-600 bg-emerald-50",purple:"text-purple-600 bg-purple-50",rose:"text-rose-600 bg-rose-50",amber:"text-amber-600 bg-amber-50"};return(0,n.jsxs)(r.Z,{className:"p-5 flex items-center gap-4",children:[(0,n.jsx)("div",{className:"h-10 w-10 rounded-xl grid place-items-center ".concat(c[t]),children:(0,n.jsx)("svg",{viewBox:"0 0 24 24",className:"h-6 w-6 ".concat(c[t].split(" ")[0]),fill:"currentColor",children:(0,n.jsx)("path",{d:i})})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-2xl font-semibold text-gray-900",children:a}),(0,n.jsx)("div",{className:"text-sm text-gray-500",children:s}),(0,n.jsx)("div",{className:"text-xs text-emerald-600 mt-1",children:l})]})]})}},10:function(e,t,a){"use strict";a.d(t,{Z:function(){return n.default}});var n=a(6615)}},function(e){e.O(0,[9044,1906,3881,3869,8753,1744],function(){return e(e.s=432)}),_N_E=e.O()}]);