(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5593],{4826:function(e,t,a){Promise.resolve().then(a.bind(a,8388))},8388:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(1514),l=a(2610),i=a(10),s=a(542),r=a(9170),c=a(7993),d=a(3939),o=a(8861);function m(){let e=(0,d.useParams)(),t=String((null==e?void 0:e.id)||""),[a,m]=(0,c.useState)(null),[u,h]=(0,c.useState)(!0),[x,v]=(0,c.useState)(null),[g,f]=(0,c.useState)(!1),[p,N]=(0,c.useState)(!1);async function j(e){f(!0);try{await (0,o.hi)("/maintenance/".concat(t,"/status"),{method:"POST",body:JSON.stringify({status:e})}),m(t=>t?{...t,status:e}:t)}catch(e){alert((null==e?void 0:e.message)||"Failed to update")}finally{f(!1)}}async function y(e){N(!0);try{let a=new FormData;a.append("file",e);let n=await (0,o.BG)("/maintenance/upload",a);await (0,o.hi)("/maintenance/".concat(t,"/attachment"),{method:"POST",body:JSON.stringify({name:n.name,url:n.url})}),m(e=>e?{...e,attachmentName:n.name,attachmentUrl:n.url}:e)}catch(e){alert((null==e?void 0:e.message)||"Failed to attach")}finally{N(!1)}}return(0,c.useEffect)(()=>{let e=!0;return h(!0),(async()=>{try{let a=await (0,o.hi)("/maintenance/".concat(t));if(!e)return;m(a)}catch(t){if(!e)return;v((null==t?void 0:t.message)||"Failed to load")}finally{e&&h(!1)}})(),()=>{e=!1}},[t]),(0,n.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[(0,n.jsx)(l.default,{}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 border-b border-gray-100",children:[(0,n.jsx)(i.Z,{title:"Scheduled Maintenance",subtitle:""}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsxs)(r.default,{href:"/maintenance",className:"text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center gap-2",children:[(0,n.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"currentColor",children:(0,n.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Back"]})})]}),(0,n.jsx)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:(0,n.jsxs)(s.Z,{className:"p-6 lg:p-7",children:[x&&(0,n.jsx)("div",{className:"mb-3 text-sm text-rose-600",children:x}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Item name"}),(0,n.jsx)("div",{className:"mt-1 font-semibold text-gray-900",children:(null==a?void 0:a.itemName)||"—"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Number"}),(0,n.jsx)("div",{className:"mt-1 font-semibold text-gray-900",children:(null==a?void 0:a.itemNumber)||"—"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Date"}),(0,n.jsx)("div",{className:"mt-1 font-semibold text-gray-900",children:(e=>{if(!e)return"—";let t=new Date(e);if(isNaN(t.getTime()))return"—";let a=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear();return"".concat(a,"/").concat(n,"/").concat(l)})(null==a?void 0:a.date)})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Maintenance type"}),(0,n.jsx)("div",{className:"mt-1 font-semibold text-gray-900",children:(null==a?void 0:a.maintenanceType)||"—"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Recurring type"}),(0,n.jsx)("div",{className:"mt-1 font-semibold text-gray-900",children:(null==a?void 0:a.recurringOption)||"—"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-gray-600",children:"Status"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsxs)("div",{className:"relative inline-flex items-center",children:[(0,n.jsx)("select",{disabled:g,value:(null==a?void 0:a.status)||"Scheduled",onChange:e=>j(e.target.value),className:"pr-8 appearance-none bg-transparent font-semibold "+((null==a?void 0:a.status)==="Completed"?"text-emerald-600":(null==a?void 0:a.status)==="Overdue"?"text-rose-600":(null==a?void 0:a.status)==="Pending"?"text-amber-600":"text-gray-900"),children:["Scheduled","Completed","Pending","Overdue"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsx)("svg",{className:"pointer-events-none absolute right-1 h-4 w-4 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M7 10l5 5 5-5z"})})]})})]})]}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)("input",{id:"maint_invoice_input",type:"file",className:"hidden",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&y(a),e.currentTarget.value=""}}),(0,n.jsx)("button",{onClick:()=>{var e;return null===(e=document.getElementById("maint_invoice_input"))||void 0===e?void 0:e.click()},disabled:p,className:"inline-flex items-center justify-center h-11 px-6 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm disabled:opacity-50",children:p?"Attaching…":"Attach Payment Invoice"}),(null==a?void 0:a.attachmentName)&&(0,n.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Attached: ",(0,n.jsx)("a",{className:"text-blue-600 hover:underline",href:(a.attachmentUrl||"").startsWith("http")?a.attachmentUrl:"".concat(o.Y_).concat(a.attachmentUrl),target:"_blank",children:a.attachmentName})]})]})]})})]})]})}},10:function(e,t,a){"use strict";a.d(t,{Z:function(){return n.default}});var n=a(6615)}},function(e){e.O(0,[9044,1906,3881,3869,8753,1744],function(){return e(e.s=4826)}),_N_E=e.O()}]);