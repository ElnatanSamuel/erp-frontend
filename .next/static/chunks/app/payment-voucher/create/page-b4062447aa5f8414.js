(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8474],{493:function(e,t,r){Promise.resolve().then(r.bind(r,950))},950:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(1514),n=r(2610),a=r(10),l=r(542),o=r(9170),i=r(7993),d=r(5120),c=r(8861);function m(){let[e,t]=(0,i.useState)(""),[r,m]=(0,i.useState)([{sn:"01",class:"",description:"",qty:1,unitPrice:0,amount:0,vatPercent:7.5,vatAmount:0,grossAmount:0,whtPercent:0,whtAmount:0,netAmount:0}]),[x,u]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),[b,y]=(0,i.useState)(""),[f,g]=(0,i.useState)(!1),[N,j]=(0,i.useState)(null),[v,w]=(0,i.useState)(!1),A=e=>Number.isFinite(e)?e.toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",P=(()=>{let e=r.reduce((e,t)=>e+t.unitPrice,0),t=r.reduce((e,t)=>e+t.amount,0);return{totalUnitPrice:e,totalAmount:t,totalVatAmount:r.reduce((e,t)=>e+t.vatAmount,0),totalWhtAmount:r.reduce((e,t)=>e+t.whtAmount,0),totalNetAmount:r.reduce((e,t)=>e+t.netAmount,0)}})(),S=(e=>{if(0===e)return"Zero";let t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],r=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],s=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],n=["","Thousand","Million","Billion"],a=e=>{let n="";return e>=100&&(n+=t[Math.floor(e/100)]+" Hundred ",e%=100),e>=10&&e<20?n+=r[e-10]+" ":(e>=20&&(n+=s[Math.floor(e/10)]+" ",e%=10),e>0&&(n+=t[e]+" ")),n.trim()},l=Math.floor(e),o=Math.round((e-l)*100),i="",d=0,c=l;for(;c>0;){let e=c%1e3;0!==e&&(i=a(e)+(n[d]?" "+n[d]:"")+" "+i),c=Math.floor(c/1e3),d++}return i=i.trim()+" Naira",o>0&&(i+=" and "+a(o)+" Kobo"),i.trim()})(P.totalNetAmount),C=(e,t,s)=>{let n=[...r];n[e]={...n[e],[t]:s};let a=n[e];a.amount=a.qty*a.unitPrice,a.vatAmount=a.amount*(a.vatPercent/100),a.grossAmount=a.amount+a.vatAmount,a.whtAmount=a.amount*(a.whtPercent/100),a.netAmount=a.grossAmount-a.whtAmount,m(n)},k=e=>{r.length>1&&m(r.filter((t,r)=>r!==e))};async function F(){if(j(null),!e.trim()){j("Subject is required");return}g(!0);try{await (0,c.hi)("/payment-voucher",{method:"POST",body:JSON.stringify({subject:e,items:r,totalUnitPrice:P.totalUnitPrice,totalAmount:P.totalAmount,totalVatAmount:P.totalVatAmount,totalWhtAmount:P.totalWhtAmount,totalNetAmount:P.totalNetAmount,netAmountInWords:S,accountName:x,accountNumber:h,bankName:b,status:"Pending"})}),w(!0)}catch(e){j((null==e?void 0:e.message)||"Failed to create payment voucher")}finally{g(!1)}}return(0,s.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[(0,s.jsx)(n.default,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-white/60 backdrop-blur supports-[backdrop-filter]:bg-white/50 border-b border-gray-100",children:[(0,s.jsx)(a.Z,{title:"Payment Voucher",subtitle:"Create account for a new staff"}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)(o.default,{href:"/payment-voucher",className:"text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center gap-2",children:[(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"currentColor",children:(0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Back"]})})]}),(0,s.jsx)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:(0,s.jsxs)(l.Z,{className:"p-6 lg:p-7",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Payment Voucher"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Subject"}),(0,s.jsx)(d.I,{placeholder:"Enter subject",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,s.jsxs)("table",{className:"min-w-full text-sm border",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"S/N"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Class"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Description"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"QTY"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Unit Price (₦)"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Amount (₦)"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"VAT %"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"VAT Amount (₦)"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Gross Amount (₦)"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"WHT%"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"WHT Amount"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Net Amount"}),(0,s.jsx)("th",{className:"border px-3 py-2 text-left font-medium",children:"Action"})]})}),(0,s.jsxs)("tbody",{children:[r.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border px-3 py-2",children:e.sn}),(0,s.jsx)("td",{className:"border px-3 py-2",children:(0,s.jsx)("input",{type:"text",value:e.class,onChange:e=>C(t,"class",e.target.value),className:"w-full px-2 py-1 border rounded text-sm"})}),(0,s.jsx)("td",{className:"border px-3 py-2",children:(0,s.jsx)("input",{type:"text",value:e.description,onChange:e=>C(t,"description",e.target.value),className:"w-full px-2 py-1 border rounded text-sm"})}),(0,s.jsx)("td",{className:"border px-3 py-2",children:(0,s.jsx)("input",{type:"number",value:e.qty,onChange:e=>C(t,"qty",Number(e.target.value)),className:"w-20 px-2 py-1 border rounded text-sm",min:"1"})}),(0,s.jsx)("td",{className:"border px-3 py-2",children:(0,s.jsx)("input",{type:"number",value:e.unitPrice,onChange:e=>C(t,"unitPrice",Number(e.target.value)),className:"w-32 px-2 py-1 border rounded text-sm",min:"0"})}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(e.amount)}),(0,s.jsx)("td",{className:"border px-3 py-2",children:(0,s.jsx)("input",{type:"number",value:e.vatPercent,onChange:e=>C(t,"vatPercent",Number(e.target.value)),className:"w-20 px-2 py-1 border rounded text-sm",min:"0",step:"0.1"})}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(e.vatAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(e.grossAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2",children:(0,s.jsx)("input",{type:"number",value:e.whtPercent,onChange:e=>C(t,"whtPercent",Number(e.target.value)),className:"w-20 px-2 py-1 border rounded text-sm",min:"0",step:"0.1"})}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(e.whtAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(e.netAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2 text-center",children:(0,s.jsx)("button",{onClick:()=>k(t),className:"text-red-600 hover:text-red-700 text-xs",disabled:1===r.length,children:"Remove"})})]},t)),(0,s.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,s.jsx)("td",{colSpan:4,className:"border px-3 py-2 text-right",children:"Total"}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(P.totalUnitPrice)}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(P.totalAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2"}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(P.totalVatAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2"}),(0,s.jsx)("td",{className:"border px-3 py-2"}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(P.totalWhtAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2 text-right",children:A(P.totalNetAmount)}),(0,s.jsx)("td",{className:"border px-3 py-2"})]})]})]})}),(0,s.jsxs)("button",{onClick:()=>{let e=String(r.length+1).padStart(2,"0");m([...r,{sn:e,class:"",description:"",qty:1,unitPrice:0,amount:0,vatPercent:7.5,vatAmount:0,grossAmount:0,whtPercent:0,whtAmount:0,netAmount:0}])},className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 text-sm font-medium mb-6",children:[(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"currentColor",children:(0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add another row"]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Net amount in words:"}),(0,s.jsx)("div",{className:"min-h-10 py-2 border-b border-gray-300 text-gray-900",children:S||"—"})]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h4",{className:"text-base font-semibold text-gray-900 mb-4",children:"Beneficiary Payment Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Account name"}),(0,s.jsx)(d.I,{placeholder:"Enter name",value:x,onChange:e=>u(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Account number"}),(0,s.jsx)(d.I,{placeholder:"Enter number",value:h,onChange:e=>p(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Bank name"}),(0,s.jsx)(d.I,{placeholder:"Enter bank name",value:b,onChange:e=>y(e.target.value)})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:F,disabled:f,className:"inline-flex items-center justify-center h-11 px-8 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm disabled:opacity-50",children:f?"Submitting…":"Submit Payment Voucher"}),N&&(0,s.jsx)("span",{className:"text-sm text-rose-600",children:N})]})]})})]}),v&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl w-[320px] p-6 text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 rounded-full bg-green-100 grid place-items-center mb-3",children:(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:"h-6 w-6 text-green-600",fill:"currentColor",children:(0,s.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),(0,s.jsx)("div",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Congratulations"}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-5",children:"Your payment voucher has been submitted successfully."}),(0,s.jsx)("button",{onClick:()=>{w(!1),window.location.href="/payment-voucher"},className:"inline-flex items-center justify-center h-10 px-6 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm",children:"Ok"})]})})]})}},10:function(e,t,r){"use strict";r.d(t,{Z:function(){return s.default}});var s=r(6615)},5120:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var s=r(1514),n=r(7993),a=r(3053);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("input",{ref:t,className:(0,a.W)("flex h-12 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm","placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",r),...n})});l.displayName="Input"}},function(e){e.O(0,[9044,1906,3881,3869,8753,1744],function(){return e(e.s=493)}),_N_E=e.O()}]);