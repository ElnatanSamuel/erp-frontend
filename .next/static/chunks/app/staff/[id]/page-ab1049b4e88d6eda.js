(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6544],{6303:function(e,s,t){Promise.resolve().then(t.bind(t,2052))},2052:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var l=t(1514),a=t(7993),r=t(3939),n=t(2610),i=t(10),o=t(542),c=t(5120),d=t(2917),x=t(8861);function u(){var e;let s=(0,r.useParams)();(0,r.useRouter)();let t=String(null!==(e=null==s?void 0:s.id)&&void 0!==e?e:""),[u,h]=(0,a.useState)(!0),[m,g]=(0,a.useState)(null),[f,p]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[j,N]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[F,S]=(0,a.useState)(""),[k,E]=(0,a.useState)(""),[C,B]=(0,a.useState)(""),[_,I]=(0,a.useState)(""),[O,R]=(0,a.useState)(""),[D,z]=(0,a.useState)(null),[M,P]=(0,a.useState)(null),[G,H]=(0,a.useState)(null),[U,A]=(0,a.useState)(!1),[L,Z]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(!1),[J,T]=(0,a.useState)(!1);async function V(){A(!0),g(null);try{let e=new FormData;f&&e.set("firstName",f),b&&e.set("lastName",b),y&&e.set("phone",y),F&&e.set("gender",F),C&&e.set("designation",C),M&&e.set("photo",M);let s=await (0,x.BG)("/users/".concat(t),e);z(s.photoUrl||null),H(null),Y(!0)}catch(e){g((null==e?void 0:e.message)||"Failed to update")}finally{A(!1)}}async function q(){Z(!0),g(null);try{let e=new FormData;k&&e.set("role",k);let s=await (0,x.BG)("/users/".concat(t),e);E(s.role||k),T(!0)}catch(e){g((null==e?void 0:e.message)||"Failed to assign role")}finally{Z(!1)}}(0,a.useEffect)(()=>{let e=!0;return h(!0),g(null),(0,x.hi)("/users/".concat(t)).then(s=>{if(!s||s.error){g("Staff not found");return}e&&(p(s.firstName||""),v(s.lastName||""),N(s.email||""),w(s.phone||""),S(s.gender||""),E(s.role||""),B(s.designation||""),I(s.staffId||""),R(s.email||""),z(s.photoUrl||null))}).catch(e=>g((null==e?void 0:e.message)||"Failed to load staff")).finally(()=>h(!1)),()=>{e=!1}},[t]);let K=(0,a.useMemo)(()=>{let e=G||D||"";return e?/^(https?:|blob:|data:)/.test(e)?e:"".concat(x.Y_).concat(e.startsWith("/")?"":"/").concat(e):""},[G,D]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"h-screen overflow-hidden bg-[#F6F8FB] flex",children:[(0,l.jsx)(n.default,{}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,l.jsxs)("div",{className:"px-6 lg:px-10 pt-6 pb-4 bg-[#F4F7FC] border-b border-gray-100",children:[(0,l.jsx)(i.Z,{title:"Edit Staff",subtitle:"Edit staff profile"}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsxs)("a",{href:"/staff",className:"text-blue-600 hover:text-blue-700 text-sm font-medium inline-flex items-center gap-2",children:[(0,l.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"currentColor",children:(0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})}),"Back"]})})]}),(0,l.jsxs)("div",{className:"px-6 lg:px-10 py-6 space-y-6 overflow-y-auto",children:[(0,l.jsx)(o.Z,{className:"p-6 lg:p-7",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 items-start",children:[(0,l.jsx)("div",{className:"lg:col-span-4",children:(0,l.jsx)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6",children:(0,l.jsx)("div",{className:"mx-auto w-full max-w-[300px]",children:(0,l.jsx)("div",{className:"h-[380px] rounded-xl border border-gray-200 grid place-items-center overflow-hidden",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"relative mx-auto h-40 w-40 rounded-full overflow-hidden border border-gray-300",children:K?(0,l.jsx)("img",{src:K,alt:"staff",className:"absolute inset-0 h-full w-full object-cover"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"absolute inset-0 rounded-full border-[3px] border-dashed border-[#D9DEE7]"}),(0,l.jsx)("div",{className:"absolute inset-3 rounded-full bg-[#F6F8FB] grid place-items-center",children:(0,l.jsx)("div",{className:"h-9 w-9 rounded-full bg-gray-100 grid place-items-center",children:(0,l.jsx)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5 text-gray-500",fill:"currentColor",children:(0,l.jsx)("path",{d:"M12 5l2 2h3a2 2 0 012 2v7a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2h3l2-2zm0 3a4 4 0 100 8 4 4 0 000-8z"})})})})]})}),(0,l.jsxs)("div",{className:"mt-4 flex items-center justify-center gap-3",children:[(0,l.jsx)("label",{htmlFor:"photo-input",className:"inline-flex items-center h-9 px-3 rounded-lg border border-gray-200 bg-white text-sm text-gray-700 cursor-pointer hover:bg-gray-50",children:"Update Photo"}),(0,l.jsx)("input",{id:"photo-input",type:"file",accept:"image/*",onChange:function(e){var s;let t=(null===(s=e.target.files)||void 0===s?void 0:s[0])||null;P(t),t?(H(URL.createObjectURL(t)),z(null)):H(null)},className:"hidden"})]}),(0,l.jsxs)("div",{className:"mt-8 text-xs text-gray-500",children:[(0,l.jsx)("div",{children:"Allowed format"}),(0,l.jsx)("div",{className:"font-medium text-gray-700",children:"JPG, JPEG, and PNG"}),(0,l.jsx)("div",{className:"mt-3",children:"Max file size"}),(0,l.jsx)("div",{className:"font-medium text-gray-700",children:"2MB"})]})]})})})})}),(0,l.jsxs)("div",{className:"lg:col-span-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"First name"}),(0,l.jsx)(c.I,{placeholder:"Enter first name",value:f,onChange:e=>p(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Last name"}),(0,l.jsx)(c.I,{placeholder:"Enter last name",value:b,onChange:e=>v(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Email address"}),(0,l.jsx)(c.I,{placeholder:"Enter email address",value:j,readOnly:!0,className:"bg-gray-50"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Phone number"}),(0,l.jsx)(c.I,{placeholder:"Enter phone number",value:y,onChange:e=>w(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Gender"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{value:F,onChange:e=>S(e.target.value),className:"w-full h-12 appearance-none rounded-xl border border-gray-200 bg-white px-4 pr-10 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,l.jsx)("option",{value:"",children:"Select gender"}),(0,l.jsx)("option",{children:"Female"}),(0,l.jsx)("option",{children:"Male"}),(0,l.jsx)("option",{children:"Other"})]}),(0,l.jsx)("svg",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",children:(0,l.jsx)("path",{d:"M7 10l5 5 5-5z"})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Role"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{value:k,onChange:e=>E(e.target.value),className:"w-full h-12 appearance-none rounded-xl border border-gray-200 bg-white px-4 pr-10 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,l.jsx)("option",{value:"",children:"Select role"}),(0,l.jsx)("option",{children:"Admin"}),(0,l.jsx)("option",{children:"HR"}),(0,l.jsx)("option",{children:"IT"})]}),(0,l.jsx)("svg",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",children:(0,l.jsx)("path",{d:"M7 10l5 5 5-5z"})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Staff ID"}),(0,l.jsx)(c.I,{placeholder:"Staff ID",value:_,readOnly:!0,className:"bg-gray-50"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Designation"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{value:C,onChange:e=>B(e.target.value),className:"w-full h-12 appearance-none rounded-xl border border-gray-200 bg-white px-4 pr-10 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,l.jsx)("option",{value:"",children:"Select designation"}),(0,l.jsx)("option",{children:"Operations"}),(0,l.jsx)("option",{children:"Human Resources"}),(0,l.jsx)("option",{children:"Security"})]}),(0,l.jsx)("svg",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",children:(0,l.jsx)("path",{d:"M7 10l5 5 5-5z"})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Official email"}),(0,l.jsx)(c.I,{placeholder:"Official Email",value:O,readOnly:!0,className:"bg-gray-50"})]})]}),(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("button",{onClick:V,disabled:U,className:"inline-flex items-center justify-center h-12 px-6 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm disabled:opacity-50",children:U?"Saving...":"Edit Profile"}),m&&(0,l.jsx)("span",{className:"ml-3 text-sm text-rose-600",children:m})]})]})]})}),(0,l.jsxs)(o.Z,{className:"p-6 lg:p-7",children:[(0,l.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-4",children:"Assign Role"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"User ID"}),(0,l.jsx)(c.I,{value:_,readOnly:!0,className:"bg-gray-50"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(d._,{className:"block text-sm text-gray-600 mb-2",children:"Role"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsxs)("select",{value:k,onChange:e=>E(e.target.value),className:"w-full h-12 appearance-none rounded-xl border border-gray-200 bg-white px-4 pr-10 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,l.jsx)("option",{value:"",children:"Select role"}),(0,l.jsx)("option",{children:"Admin"}),(0,l.jsx)("option",{children:"HR"}),(0,l.jsx)("option",{children:"IT"})]}),(0,l.jsx)("svg",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"currentColor",children:(0,l.jsx)("path",{d:"M7 10l5 5 5-5z"})})]}),(0,l.jsx)("button",{onClick:q,disabled:L,className:"inline-flex items-center justify-center h-12 px-6 rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm disabled:opacity-50",children:L?"Saving...":"Submit"})]})]})]})]}),(0,l.jsx)("footer",{className:"text-center text-xs text-gray-400 pt-2 pb-6",children:"Copyright \xa9 2025 Relia Energy. All Rights Reserved"})]})]})]}),W&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm grid place-items-center",children:(0,l.jsxs)("div",{className:"w-[320px] rounded-2xl bg-white p-6 text-center shadow-xl",children:[(0,l.jsx)("img",{src:"/images/congratulations.png",alt:"congratulations",className:"mx-auto mb-3 h-16 w-16 object-contain"}),(0,l.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"Congratulations"}),(0,l.jsx)("div",{className:"mt-1 text-sm text-gray-600",children:"You have successfully edited your profile"}),(0,l.jsx)("button",{onClick:()=>Y(!1),className:"mt-5 inline-flex items-center justify-center h-10 w-full rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm",children:"Ok"})]})}),J&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm grid place-items-center",children:(0,l.jsxs)("div",{className:"w-[320px] rounded-2xl bg-white p-6 text-center shadow-xl",children:[(0,l.jsx)("img",{src:"/images/congratulations.png",alt:"congratulations",className:"mx-auto mb-3 h-16 w-16 object-contain"}),(0,l.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"Congratulations"}),(0,l.jsxs)("div",{className:"mt-1 text-sm text-gray-600",children:["You have successfully assigned role ",k||"—"," to"," ","".concat(f," ").concat(b).trim()||"user"]}),(0,l.jsx)("button",{onClick:()=>T(!1),className:"mt-5 inline-flex items-center justify-center h-10 w-full rounded-xl text-white bg-gradient-to-r from-[#1D75FF] via-[#5B6EF5] to-[#1B57E9] hover:brightness-105 shadow-sm",children:"Ok"})]})})]})}},10:function(e,s,t){"use strict";t.d(s,{Z:function(){return l.default}});var l=t(6615)},5120:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var l=t(1514),a=t(7993),r=t(3053);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)("input",{ref:s,className:(0,r.W)("flex h-12 w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm","placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent","disabled:cursor-not-allowed disabled:opacity-50",t),...a})});n.displayName="Input"},2917:function(e,s,t){"use strict";t.d(s,{_:function(){return r}});var l=t(1514);t(7993);var a=t(3053);function r(e){let{className:s,...t}=e;return(0,l.jsx)("label",{className:(0,a.W)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...t})}}},function(e){e.O(0,[9044,1906,3881,3869,8753,1744],function(){return e(e.s=6303)}),_N_E=e.O()}]);